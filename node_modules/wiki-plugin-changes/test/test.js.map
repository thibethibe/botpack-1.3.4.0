{
  "version": 3,
  "names": [
    "createFakeLocalStorage",
    "pluginCtor",
    "require",
    "initialContents",
    "arguments",
    "length",
    "undefined",
    "fake",
    "getStoreSize",
    "keys",
    "store",
    "_",
    "k",
    "results",
    "setItem",
    "v",
    "getItem",
    "key",
    "i",
    "removeItem",
    "Object",
    "defineProperty",
    "get",
    "describe",
    "$div",
    "clickDeleteForPageWithSlug",
    "expectNumberOfPagesToBe",
    "fakeLocalStore",
    "installPlugin",
    "makePlugin",
    "beforeEach",
    "$",
    "localStorage",
    "plugin",
    "emit",
    "bind",
    "expectedLength",
    "expect",
    "find",
    "to",
    "be",
    "slug",
    "concat",
    "siblings",
    "trigger",
    "it",
    "html",
    "contain",
    "page1",
    "JSON",
    "stringify",
    "title",
    "page2",
    "page3",
    "not",
    "allTitles",
    "map",
    "a",
    "toArray",
    "join",
    "ok"
  ],
  "sources": [
    "test.coffee"
  ],
  "sourcesContent": [
    "pluginCtor = require('./changes')\n\ncreateFakeLocalStorage = (initialContents={})->\n  store = initialContents\n\n  keys = -> (k for k,_ of store)\n  getStoreSize = -> keys().length\n\n  fake = \n    setItem: (k,v)-> store[k] = v\n    getItem: (k)-> store[k]\n    key: (i) -> keys()[i]\n    removeItem: (k) -> delete store[k]\n\n  Object.defineProperty( fake, 'length', { get: getStoreSize } )\n  fake\n\n\ndescribe 'changes plugin', ->\n  fakeLocalStore = undefined\n  $div = undefined\n  \n  beforeEach ->\n    $div = $('<div/>')\n    fakeLocalStore = createFakeLocalStorage()\n\n  makePlugin = -> pluginCtor($,{localStorage: fakeLocalStore})\n  installPlugin = -> \n    plugin = makePlugin()\n    plugin.emit( $div, {} )\n    plugin.bind( $div, {} )\n\n  expectNumberOfPagesToBe = (expectedLength)->\n    expect( $div.find('li a').length ).to.be(expectedLength)\n\n  clickDeleteForPageWithSlug = (slug)->\n    $div.find(\"li a[data-page-name='#{slug}']\").siblings('button').trigger('click')\n\n  it \"renders 'empty' when there are no local changes\", ->\n    installPlugin()\n    expect( $div.html() ).to.contain('empty')\n    expectNumberOfPagesToBe(0)\n\n  describe 'some pages in local store', ->\n    beforeEach ->\n      fakeLocalStore = createFakeLocalStorage(\n        page1: JSON.stringify({ title: \"A Page\" }),\n        page2: JSON.stringify({ title: \"Another Page\" }),\n        page3: JSON.stringify({ title: \"Page the Third\" })\n      )\n\n    it \"doesn't render 'empty'\", ->\n      installPlugin()\n      expect( $div.html() ).not.to.contain('empty')\n\n    it \"lists each page found in the local store\", ->\n      installPlugin()\n      expectNumberOfPagesToBe(3)\n      allTitles = $div.find('li a').map( (_,a)-> $(a).html() ).toArray().join('')\n      expect( allTitles ).to.contain('A Page')\n      expect( allTitles ).to.contain('Another Page')\n      expect( allTitles ).to.contain('Page the Third')\n\n    it \"removes a page from local store\", ->\n      installPlugin()\n      expect( fakeLocalStore.getItem('page2') ).to.be.ok()\n      clickDeleteForPageWithSlug('page2')\n      expect( fakeLocalStore.getItem('page2') ).not.to.be.ok()\n\n\n    it \"updates the plugin div when a page is removed\", ->\n      installPlugin()\n      expectNumberOfPagesToBe(3)\n      clickDeleteForPageWithSlug('page2')\n      expectNumberOfPagesToBe(2)\n"
  ],
  "mappings": "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"
}