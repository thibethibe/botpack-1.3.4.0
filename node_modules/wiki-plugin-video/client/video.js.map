{
  "version": 3,
  "names": [
    "UrlAdapter",
    "bind",
    "embed",
    "emit",
    "parse",
    "text",
    "arguments",
    "length",
    "undefined",
    "args",
    "err",
    "i",
    "len",
    "line",
    "ref",
    "result",
    "url",
    "split",
    "match",
    "start",
    "end",
    "player",
    "options",
    "key",
    "error",
    "console",
    "log",
    "concat",
    "href",
    "caption",
    "_ref",
    "fragment",
    "params",
    "toUpperCase",
    "push",
    "reduce",
    "acc",
    "curr",
    "Number",
    "join",
    "includes",
    "wiki",
    "resolveLinks",
    "$item",
    "item",
    "append",
    "on",
    "textEditor",
    "window",
    "URL",
    "module",
    "require",
    "plugins",
    "video",
    "exports"
  ],
  "sources": [
    "video.coffee"
  ],
  "sourcesContent": [
    "###\n * Federated Wiki : Video Plugin\n *\n * Licensed under the MIT license.\n * https://github.com/fedwiki/wiki-plugin-video/blob/master/LICENSE.txt\n###\n\nparse = (text='') ->\n  result = {}\n  for line in text.split /\\r\\n?|\\n/\n    if args = line.match /^\\s*START\\s+([\\w:\\.]+)\\s*$/\n      result.start = args[1]\n    else if args = line.match /^\\s*END\\s+([\\w:\\.]+)\\s*$/\n      result.end = args[1]\n    else if args = line.match /^\\s*([A-Z0-9]{3,})\\s+([\\w\\.\\-\\/+0-9]+)\\s*$/\n      result.player = args[1]\n      result.options = ''\n      result.key = args[2]\n    else if args = line.match /^\\s*([A-Z0-9]{3,})\\s+([A-Z\\,]+)\\s+([\\w\\.\\-\\/+0-9]+)\\s*$/\n      result.player = args[1]\n      result.options = args[2]\n      result.key = args[3]\n    else if args = line.match /^\\s*(HTML5)\\s+([A-Za-z0-9]+)\\s+(.+)\\s*$/\n      try url = new UrlAdapter(args[3])\n      catch err then console.log \"failed to parse URL: #{err}\"\n      result.player = args[1]\n      result.options = args[2]\n      result.key = url.href\n    else\n      result.caption ||= ' '\n      result.caption += line + ' '\n  result\n\nembed = ({player, options, key, start, end}) ->\n  switch player\n    when 'YOUTUBE'\n      if options.toUpperCase() is \"PLAYLIST\"\n        \"\"\"\n          <iframe\n            width=\"420\" height=\"236\"\n            src=\"https://www.youtube-nocookie.com/embed/videoseries?list=#{key}&rel=0\"\n            frameborder=\"0\"\n            allowfullscreen>\n          </iframe>\n        \"\"\"\n      else\n        params = []\n        params.push(\"start=#{start.split(':').reduce((acc,curr) -> (acc * 60) + Number(curr))}\") if start?\n        params.push(\"end=#{end.split(':').reduce((acc,curr) -> (acc * 60) + Number(curr))}\") if end?\n        params.push(\"rel=0\")\n        \"\"\"\n          <iframe\n            width=\"420\" height=\"236\"\n            src=\"https://www.youtube-nocookie.com/embed/#{key}?#{params.join('&')}\"\n            frameborder=\"0\"\n            allowfullscreen>\n          </iframe>\n        \"\"\"\n    when 'VIMEO'\n      params = []\n      params.push(\"byline=0\")\n      params.push(\"dnt=1\")\n      params.push(\"portrait=0\")\n      params.push(\"title=0\")\n      params.push(\"#t=#{start}\") if start?\n      \"\"\"\n        <iframe\n          src=\"https://player.vimeo.com/video/#{key}?#{params.join('&')}\"\n          width=\"420\" height=\"236\"\n          frameborder=\"0\"\n          allowfullscreen>\n        </iframe>\n      \"\"\"\n    when 'ARCHIVE'\n      \"\"\"\n        <iframe\n          src=\"https://archive.org/embed/#{key}\"\n          width=\"420\" height=\"315\"\n          frameborder=\"0\" webkitallowfullscreen=\"true\" mozallowfullscreen=\"true\"\n          allowfullscreen>\n        </iframe>\n      \"\"\"\n    when 'TED'\n      \"\"\"\n        <iframe\n          src=\"https://embed-ssl.ted.com/talks/#{key}.html\"\n          width=\"420\" height=\"300\"\n          frameborder=\"0\" scrolling=\"no\" webkitAllowFullScreen mozallowfullscreen\n          allowFullScreen>\n        </iframe>\n      \"\"\"\n    when 'HTML5'\n      if !key.includes('#t=') and start? or end?\n        fragment = \"#t=\"\n        fragment += start if start\n        fragment += \",#{end}\" if end\n        key = key + fragment\n      \"\"\"\n        <video controls preload=\"metadata\" width=\"100%\">\n          <source src=\"#{key}\"\n                  type=\"video/#{options}\">\n        </video>\n      \"\"\"\n    # CHANNEL9 and TEDX sources are not longer available, so provide some guidance.\n    when 'TEDX'\n      \"\"\"\n        <i>TEDx talks are now available in the TEDx YouTube channel. See #{wiki.resolveLinks('[[Updating TEDx items]]')} for help.</i><br>\n      \"\"\"\n    when 'CHANNEL9'\n      \"\"\"\n        <i>The Channel 9 site closed, see #{wiki.resolveLinks('[[Updating CHANNEL9 items]]')} for help.</i><br>\n      \"\"\"\n    else\n     \"(unknown player)\"\n\nemit = ($item, item) ->\n  result = parse item.text\n  $item.append \"\"\"\n    #{embed result}\n    <br>\n    <i>#{wiki.resolveLinks(result.caption || \"(no caption)\")}</i>\n  \"\"\"\n\nbind = ($item, item) ->\n  $item.on 'dblclick', () -> wiki.textEditor $item, item\n\nif window?\n  UrlAdapter = URL\nif module?\n  UrlAdapter = require('url').URL\nwindow.plugins.video = {emit, bind, UrlAdapter} if window?\nmodule.exports = {parse, embed, UrlAdapter} if module?\n"
  ],
  "mappings": ";;AAKG;EAAA;;;;;;EAAA,IAAAA,UAAA,EAAAC,IAAA,EAAAC,KAAA,EAAAC,IAAA,EAAAC,KAAA;EAEHA,KAAA,GAAQ,SAAAA,MAAA;IAAA,IAACC,IAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAK,EAAN;IACR,IAAAG,IAAA,EAAAC,GAAA,EAAAC,CAAA,EAAAC,GAAA,EAAAC,IAAA,EAAAC,GAAA,EAAAC,MAAA,EAAAC,GAAA;IAAED,MAAA,GAAS;IACTD,GAAA,GAAAT,IAAA,CAAAY,KAAA;IAAA,KAAAN,CAAA,MAAAC,GAAA,GAAAE,GAAA,CAAAP,MAAA,EAAAI,CAAA,GAAAC,GAAA,EAAAD,CAAA;;MACE,IAAGF,IAAA,GAAOI,IAAI,CAACK,KAAL,CAAW,4BAAX,CAAV;QACEH,MAAM,CAACI,KAAP,GAAeV,IAAI,CAAC,CAAD;OADrB,MAEK,IAAGA,IAAA,GAAOI,IAAI,CAACK,KAAL,CAAW,0BAAX,CAAV;QACHH,MAAM,CAACK,GAAP,GAAaX,IAAI,CAAC,CAAD;OADd,MAEA,IAAGA,IAAA,GAAOI,IAAI,CAACK,KAAL,CAAW,4CAAX,CAAV;QACHH,MAAM,CAACM,MAAP,GAAgBZ,IAAI,CAAC,CAAD;QACpBM,MAAM,CAACO,OAAP,GAAiB;QACjBP,MAAM,CAACQ,GAAP,GAAad,IAAI,CAAC,CAAD;OAHd,MAIA,IAAGA,IAAA,GAAOI,IAAI,CAACK,KAAL,CAAW,yDAAX,CAAV;QACHH,MAAM,CAACM,MAAP,GAAgBZ,IAAI,CAAC,CAAD;QACpBM,MAAM,CAACO,OAAP,GAAiBb,IAAI,CAAC,CAAD;QACrBM,MAAM,CAACQ,GAAP,GAAad,IAAI,CAAC,CAAD;OAHd,MAIA,IAAGA,IAAA,GAAOI,IAAI,CAACK,KAAL,CAAW,yCAAX,CAAV;QACH;UAAIF,GAAA,GAAM,IAAIhB,UAAJ,CAAeS,IAAI,CAAC,CAAD,CAAnB;SACV,QAAAe,KAAA;UAAMd,GAAA,GAAAc,KAAA;UAASC,OAAO,CAACC,GAAR,yBAAAC,MAAA,CAAoCjB,GAAxB,CAAZ;;QACfK,MAAM,CAACM,MAAP,GAAgBZ,IAAI,CAAC,CAAD;QACpBM,MAAM,CAACO,OAAP,GAAiBb,IAAI,CAAC,CAAD;QACrBM,MAAM,CAACQ,GAAP,GAAaP,GAAG,CAACY,IAAA;OALd;QAOHb,MAAM,CAACc,OAAA,KAAPd,MAAM,CAACc,OAAA,GAAY;QACnBd,MAAM,CAACc,OAAP,IAAkBhB,IAAA,GAAO;;IArB7B;WAsBAE,MAAA;EAxBM;EA0BRb,KAAA,GAAQ,SAAAA,MAAA4B,IAAA;IAAA,IAAET,MAAD,GAAAS,IAAA,CAACT,MAAD;MAASC,OAAT,GAAAQ,IAAA,CAASR,OAAT;MAAkBC,GAAlB,GAAAO,IAAA,CAAkBP,GAAlB;MAAuBJ,KAAvB,GAAAW,IAAA,CAAuBX,KAAvB;MAA8BC,GAA9B,GAAAU,IAAA,CAA8BV,GAA9B;IACT,IAAAW,QAAA,EAAAC,MAAA;IAAE,QAAOX,MAAP;MAAA,KACO,SADP;QAEI,IAAGC,OAAO,CAACW,WAAR,OAAyB,UAA5B;oIAIqEV,GAHnE;SADF;UAUES,MAAA,GAAS;UACT,IAA4Fb,KAAA,QAA5F;YAAAa,MAAM,CAACE,IAAP,UAAAP,MAAA,CAAqBR,KAAK,CAACF,KAAN,CAAY,GAAZ,CAAgB,CAACkB,MAAjB,CAAwB,UAACC,GAAD,EAAKC,IAAL;qBAAeD,GAAA,GAAM,EAAP,GAAaE,MAAA,CAAOD,IAAP;YAA3B,CAAxB,CAAT,CAAZ;;UACA,IAAwFjB,GAAA,QAAxF;YAAAY,MAAM,CAACE,IAAP,QAAAP,MAAA,CAAmBP,GAAG,CAACH,KAAJ,CAAU,GAAV,CAAc,CAACkB,MAAf,CAAsB,UAACC,GAAD,EAAKC,IAAL;qBAAeD,GAAA,GAAM,EAAP,GAAaE,MAAA,CAAOD,IAAP;YAA3B,CAAtB,CAAP,CAAZ;;UACAL,MAAM,CAACE,IAAP,CAAY,OAAZ;mHAIkDX,GAHlD,OAAAI,MAAA,CAGyDK,MAAM,CAACO,IAAP,CAAY,GAAZ,CAHzD;;QAfC;MADP,KAwBO,OAxBP;QAyBIP,MAAA,GAAS;QACTA,MAAM,CAACE,IAAP,CAAY,UAAZ;QACAF,MAAM,CAACE,IAAP,CAAY,OAAZ;QACAF,MAAM,CAACE,IAAP,CAAY,YAAZ;QACAF,MAAM,CAACE,IAAP,CAAY,SAAZ;QACA,IAA8Bf,KAAA,QAA9B;UAAAa,MAAM,CAACE,IAAP,OAAAP,MAAA,CAAkBR,KAAN,CAAZ;;yEAG0CI,GAF1C,OAAAI,MAAA,CAEiDK,MAAM,CAACO,IAAP,CAAY,GAAZ,CAFjD;MA/BJ,KAuCO,SAvCP;oEA0CyChB,GAFrC;MAxCJ,KAgDO,KAhDP;0EAmD+CA,GAF3C;MAjDJ,KAyDO,OAzDP;QA0DI,IAAG,CAACA,GAAG,CAACiB,QAAJ,CAAa,KAAb,CAAD,IAAyBrB,KAAA,QAAzB,IAAmCC,GAAA,QAAtC;UACEW,QAAA,GAAW;UACX,IAAqBZ,KAArB;YAAAY,QAAA,IAAYZ,KAAA;;UACZ,IAAyBC,GAAzB;YAAAW,QAAA,QAAAJ,MAAA,CAAgBP,GAAJ;;UACZG,GAAA,GAAMA,GAAA,GAAMQ,QAAA;;+FAGKR,GAFnB,iCAAAI,MAAA,CAG0BL,OAH1B;;MA/DJ,KAsEO,MAtEP;0FAwEyEmB,IAAI,CAACC,YAAL,CAAkB,yBAAlB,CADrE;MAvEJ,KA0EO,UA1EP;2DA4E0CD,IAAI,CAACC,YAAL,CAAkB,6BAAlB,CADtC;MA3EJ;eA+EG;IA/EH;EADM;EAkFRvC,IAAA,GAAO,SAAAA,KAACwC,KAAD,EAAQC,IAAR;IACP,IAAA7B,MAAA;IAAEA,MAAA,GAASX,KAAA,CAAMwC,IAAI,CAACvC,IAAX;WACTsC,KAAK,CAACE,MAAN,IAAAlB,MAAA,CACIzB,KAAA,CAAMa,MAAN,CADS,iBAAAY,MAAA,CAGNc,IAAI,CAACC,YAAL,CAAkB3B,MAAM,CAACc,OAAP,IAAkB,cAApC,CAHM,SAAb;EAFK;EAQP5B,IAAA,GAAO,SAAAA,KAAC0C,KAAD,EAAQC,IAAR;WACLD,KAAK,CAACG,EAAN,CAAS,UAAT,EAAqB;aAAML,IAAI,CAACM,UAAL,CAAgBJ,KAAhB,EAAuBC,IAAvB;IAAN,CAArB;EADK;EAGP,IAAG,OAAAI,MAAA,oBAAAA,MAAA,SAAH;IACEhD,UAAA,GAAaiD,GAAA;;EACf,IAAG,OAAAC,MAAA,oBAAAA,MAAA,SAAH;IACElD,UAAA,GAAamD,OAAA,CAAQ,KAAR,CAAc,CAACF,GAAA;;EAC9B,IAAmD,OAAAD,MAAA,oBAAAA,MAAA,SAAnD;IAAAA,MAAM,CAACI,OAAO,CAACC,KAAf,GAAuB;MAAClD,IAAD,EAACA,IAAD;MAAOF,IAAP,EAAOA,IAAP;MAAaD,UAAb,EAAaA;IAAb;;EACvB,IAA+C,OAAAkD,MAAA,oBAAAA,MAAA,SAA/C;IAAAA,MAAM,CAACI,OAAP,GAAiB;MAAClD,KAAD,EAACA,KAAD;MAAQF,KAAR,EAAQA,KAAR;MAAeF,UAAf,EAAeA;IAAf"
}